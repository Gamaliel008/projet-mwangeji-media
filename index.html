<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ville de Kolwezi — Portail Officiel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <style>
        /* Personnalisation */
        body { font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        /* Couleurs thématiques Kolwezi - Indigo et un léger Bleu/Violet */
        .hero-bg { background: linear-gradient(90deg, rgba(99,102,241,0.07), rgba(167,139,250,0.05)); }
        /* Effet Glassmorphism pour la barre de navigation */
        .glass { backdrop-filter: blur(8px); background: rgba(255,255,255,0.7); }
    </style>
</head>
<body class="antialiased text-gray-800">
    <header class="fixed top-0 left-0 right-0 z-50 shadow-md bg-white/70 glass">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="#home" class="flex items-center gap-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-lg p-1">
                    <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'><rect width='40' height='40' rx='8' fill='%233730a3'/><text x='50%' y='55%' font-size='18' font-family='Arial' font-weight='bold' fill='white' text-anchor='middle' alignment-baseline='middle'>KZ</text></svg>" alt="Logo Mairie de Kolwezi" class="w-10 h-10 rounded-lg shadow-md"/>
                    <div class="hidden sm:block">
                        <div class="text-base font-bold text-indigo-700">Mairie de Kolwezi</div>
                        <div class="text-xs text-gray-500">Portail institutionnel</div>
                    </div>
                </a>

                <nav class="hidden md:flex items-center gap-7 text-sm font-medium">
                    <a href="#home" class="hover:text-indigo-600 transition duration-150">Accueil</a>
                    <a href="#a-propos" class="hover:text-indigo-600 transition duration-150">À propos</a>
                    <a href="#communes" class="hover:text-indigo-600 transition duration-150">Communes</a>
                    <a href="#services" class="hover:text-indigo-600 transition duration-150">Services</a>
                    <a href="#galerie" class="hover:text-indigo-600 transition duration-150">Galerie</a>
                    <a href="#contact" class="hover:text-indigo-600 transition duration-150">Contact</a>
                </nav>

                <div class="flex items-center gap-3">
                    <a href="#connexion" class="text-sm px-4 py-2 font-semibold border border-indigo-600 rounded-lg bg-indigo-50 text-indigo-700 hover:bg-indigo-100 transition duration-150">Espace Admin</a>
                    <button id="btnMenu" class="md:hidden p-2 rounded-lg text-indigo-600 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500" aria-label="Menu" aria-expanded="false">
                        <svg id="iconMenu" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <nav id="mobileMenu" class="hidden md:hidden border-t border-gray-100 bg-white/90">
            <div class="px-4 py-4 flex flex-col gap-3 font-medium">
                <a href="#home" class="p-2 rounded-md hover:bg-gray-50">Accueil</a>
                <a href="#a-propos" class="p-2 rounded-md hover:bg-gray-50">À propos</a>
                <a href="#communes" class="p-2 rounded-md hover:bg-gray-50">Communes</a>
                <a href="#services" class="p-2 rounded-md hover:bg-gray-50">Services</a>
                <a href="#galerie" class="p-2 rounded-md hover:bg-gray-50">Galerie</a>
                <a href="#contact" class="p-2 rounded-md hover:bg-gray-50">Contact</a>
            </div>
        </nav>
    </header>

    <main class="pt-24">
        <section id="home" class="hero-bg py-24 sm:py-32">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h1 class="text-4xl sm:text-5xl font-extrabold leading-tight text-gray-900">Kolwezi — <span class="text-indigo-600">Service public, services transparents</span></h1>
                        <p class="mt-5 text-lg text-gray-600">Un portail pour rapprocher la mairie, les citoyens et les acteurs économiques. Infos, démarches, actualités et formulaires — tout au même endroit.</p>

                        <div class="mt-8 flex flex-col sm:flex-row gap-4">
                            <a href="#communes" class="px-6 py-3 rounded-xl bg-indigo-600 text-white text-base font-semibold hover:bg-indigo-700 shadow-lg transition duration-150 ease-in-out">Découvrir les communes</a>
                            <a href="#services" class="px-6 py-3 rounded-xl border border-gray-300 text-base hover:bg-gray-50 transition duration-150 ease-in-out">Nos services</a>
                        </div>

                        <div class="mt-8 text-sm text-gray-500">Dernière mise à jour : <span id="lastUpdateDate">03 novembre 2025</span></div>
                    </div>

                    <div class="rounded-3xl overflow-hidden shadow-2xl bg-white p-8 border border-gray-100">
                        <img src="https://source.unsplash.com/collection/190727/800x600?city" alt="Vue aérienne de Kolwezi" class="w-full h-60 object-cover rounded-xl shadow-inner mb-6" />
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 border border-indigo-200 rounded-lg bg-indigo-50">
                                <div class="text-base font-semibold text-indigo-700">Population estimée</div>
                                <div class="text-2xl font-bold mt-1 text-gray-900">~ 500 000</div>
                            </div>
                            <div class="p-4 border border-purple-200 rounded-lg bg-purple-50">
                                <div class="text-base font-semibold text-purple-700">Économie principale</div>
                                <div class="text-2xl font-bold mt-1 text-gray-900">Mine & Services</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="a-propos" class="py-16">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <h2 class="text-3xl font-bold text-gray-900">Notre Mission</h2>
                <p class="mt-4 text-lg text-gray-600">En tant que portail officiel de la mairie de Kolwezi, notre mission est de **simplifier les démarches administratives**, d'assurer la **transparence** et de faciliter l'accès aux **informations municipales** pour tous les citoyens et partenaires économiques.</p>
            </div>
        </section>

        <section id="communes" class="py-16 bg-gray-50">
            <div class="max-w-6xl mx-auto px-4">
                <h2 class="text-3xl font-bold mb-8 text-gray-900 text-center">Les communes administratives</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <article class="p-6 bg-white rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 border-t-4 border-indigo-500">
                        <h3 class="text-xl font-bold text-indigo-700">Commune de Dilala</h3>
                        <p class="mt-3 text-gray-600 text-sm">Centre historique et administratif de la ville. Forte densité de commerces et de services publics.</p>
                        <ul class="mt-4 text-sm text-gray-600 space-y-2">
                            <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Quartiers : Kasulo, Kapata, Golf</li>
                            <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Services : État civil, Urbanisme</li>
                        </ul>
                        <div class="mt-5">
                            <a href="#" class="text-indigo-600 text-sm font-semibold hover:text-indigo-800 transition duration-150">Voir les démarches spécifiques →</a>
                        </div>
                    </article>

                    <article class="p-6 bg-white rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 border-t-4 border-indigo-500">
                        <h3 class="text-xl font-bold text-indigo-700">Commune de Manika</h3>
                        <p class="mt-3 text-gray-600 text-sm">Zone en forte **expansion démographique**, porte d'entrée de l'activité minière et industrielle.</p>
                        <ul class="mt-4 text-sm text-gray-600 space-y-2">
                            <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Zone industrielle et minière</li>
                            <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Services : Inspection, Permis d'exploitation</li>
                        </ul>
                        <div class="mt-5">
                            <a href="#" class="text-indigo-600 text-sm font-semibold hover:text-indigo-800 transition duration-150">Voir les démarches spécifiques →</a>
                        </div>
                    </article>

                    <article class="p-6 bg-white rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 border-t-4 border-gray-400">
                        <h3 class="text-xl font-bold text-gray-700">Autres Communes (e.g., Luilu)</h3>
                        <p class="mt-3 text-gray-600 text-sm">Couvre les nouvelles zones de développement et les quartiers périphériques. Services de proximité.</p>
                        <ul class="mt-4 text-sm text-gray-600 space-y-2">
                            <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>En cours de décentralisation</li>
                            <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Services : Projets sociaux, Taxes locales</li>
                        </ul>
                        <div class="mt-5">
                            <a href="#" class="text-gray-600 text-sm font-semibold hover:text-gray-800 transition duration-150">En savoir plus →</a>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <section id="services" class="py-16">
            <div class="max-w-6xl mx-auto px-4">
                <h2 class="text-3xl font-bold mb-8 text-gray-900 text-center">Nos principaux services en ligne</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="p-6 bg-white rounded-xl shadow-lg border-t-2 border-blue-500 hover:shadow-xl transition duration-300">
                        <h3 class="text-lg font-bold text-blue-700">État civil</h3>
                        <p class="mt-2 text-sm text-gray-600">Demande d'extrait de naissance, de mariage, de décès et autres actes.</p>
                        <div class="mt-4">
                            <a href="#" class="text-blue-600 text-sm font-semibold hover:text-blue-800">Formulaire en ligne →</a>
                        </div>
                    </div>
                    <div class="p-6 bg-white rounded-xl shadow-lg border-t-2 border-green-500 hover:shadow-xl transition duration-300">
                        <h3 class="text-lg font-bold text-green-700">Urbanisme</h3>
                        <p class="mt-2 text-sm text-gray-600">Permis de construire, certificats de conformité, consultations des plans.</p>
                        <div class="mt-4">
                            <a href="#" class="text-green-600 text-sm font-semibold hover:text-green-800">Soumettre une demande →</a>
                        </div>
                    </div>
                    <div class="p-6 bg-white rounded-xl shadow-lg border-t-2 border-yellow-500 hover:shadow-xl transition duration-300">
                        <h3 class="text-lg font-bold text-yellow-700">Marchés Publics</h3>
                        <p class="mt-2 text-sm text-gray-600">Appels d'offres, avis publics et consultations pour les fournisseurs.</p>
                        <div class="mt-4">
                            <a href="#" class="text-yellow-600 text-sm font-semibold hover:text-yellow-800">Consulter les appels →</a>
                        </div>
                    </div>
                    <div class="p-6 bg-white rounded-xl shadow-lg border-t-2 border-red-500 hover:shadow-xl transition duration-300">
                        <h3 class="text-lg font-bold text-red-700">Taxes & Impôts</h3>
                        <p class="mt-2 text-sm text-gray-600">Paiement des taxes locales, déclaration d'impôts municipaux.</p>
                        <div class="mt-4">
                            <a href="#" class="text-red-600 text-sm font-semibold hover:text-red-800">Accéder à la plateforme →</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="galerie" class="py-16 bg-gray-100">
            <div class="max-w-6xl mx-auto px-4">
                <h2 class="text-3xl font-bold mb-8 text-gray-900 text-center">Kolwezi en images</h2>
                <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-4">
                    <img src="https://source.unsplash.com/featured/?city,dr-congo" alt="Vue de la ville de Kolwezi" class="w-full h-36 object-cover rounded-lg shadow-md hover:scale-[1.03] transition duration-300"/>
                    <img src="https://source.unsplash.com/featured/?mining" alt="Activité minière" class="w-full h-36 object-cover rounded-lg shadow-md hover:scale-[1.03] transition duration-300"/>
                    <img src="https://source.unsplash.com/featured/?market,africa" alt="Marché local" class="w-full h-36 object-cover rounded-lg shadow-md hover:scale-[1.03] transition duration-300"/>
                    <img src="https://source.unsplash.com/featured/?road,africa" alt="Infrastructures routières" class="w-full h-36 object-cover rounded-lg shadow-md hover:scale-[1.03] transition duration-300"/>
                    <img src="https://source.unsplash.com/featured/?school,africa" alt="Écoles à Kolwezi" class="w-full h-36 object-cover rounded-lg shadow-md hover:scale-[1.03] transition duration-300"/>
                    <img src="https://source.unsplash.com/featured/?government" alt="Bâtiment administratif" class="w-full h-36 object-cover rounded-lg shadow-md hover:scale-[1.03] transition duration-300"/>
                </div>
            </div>
        </section>

        <section id="contact" class="py-16">
            <div class="max-w-3xl mx-auto px-4">
                <h2 class="text-3xl font-bold mb-4 text-gray-900 text-center">Contactez la mairie</h2>
                <p class="text-lg text-gray-600 mb-6 text-center">Utilisez ce formulaire pour vos questions urgentes, demandes de rendez-vous ou signalements.</p>

                <form id="contactForm" class="grid grid-cols-1 gap-6 p-8 bg-gray-50 rounded-xl shadow-lg border border-gray-200">
                    <input required name="nom" placeholder="Nom complet" class="p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" type="text" aria-label="Nom complet"/>
                    <input required name="email" type="email" placeholder="Email (pour la réponse)" class="p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" aria-label="Votre adresse email"/>
                    <textarea required name="message" placeholder="Votre message" rows="6" class="p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" aria-label="Votre message"></textarea>
                    <div class="flex items-center gap-4">
                        <button type="submit" id="submitBtn" class="px-6 py-3 rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition duration-150 ease-in-out disabled:opacity-50" disabled>
                            Envoyer le message
                        </button>
                        <button type="reset" class="px-6 py-3 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out">
                            Réinitialiser
                        </button>
                    </div>
                    <div id="formMsg" class="text-sm p-3 rounded-lg bg-green-100 text-green-700 border border-green-200 hidden" role="alert">
                        ✅ Message envoyé avec succès. Nous vous répondrons dans les plus brefs délais.
                    </div>
                    <div id="errorMsg" class="text-sm p-3 rounded-lg bg-red-100 text-red-700 border border-red-200 hidden" role="alert">
                        ❌ Une erreur s'est produite lors de l'envoi. Veuillez réessayer ou contacter-nous par téléphone.
                    </div>
                </form>
            </div>
        </section>

        <section id="connexion" class="py-16 bg-gray-50 border-t">
            <div class="max-w-md mx-auto px-4">
                <h3 class="text-2xl font-bold text-gray-900 mb-5 text-center">Espace Administration</h3>
                <p class="text-sm text-gray-600 mb-4 text-center">Authentification réservée aux agents municipaux. Gérez les contenus, les demandes et les actualités.</p>
                <form onsubmit="event.preventDefault();alert('ATTENTION : Ceci est un prototype. Intégrer un système d\'authentification réel (Firebase Auth, etc.) ici.');" class="p-6 bg-white rounded-xl shadow-lg">
                    <input placeholder="Identifiant ou Email" class="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:ring-indigo-500 focus:border-indigo-500" required type="text" />
                    <input placeholder="Mot de passe" type="password" class="w-full p-3 border border-gray-300 rounded-lg mb-6 focus:ring-indigo-500 focus:border-indigo-500" required />
                    <div class="flex flex-col sm:flex-row gap-3">
                        <button class="flex-1 px-4 py-2 rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition duration-150 ease-in-out">
                            Se connecter
                        </button>
                        <a class="text-center px-4 py-2 rounded-lg border border-gray-300 text-sm text-gray-600 hover:bg-gray-100" href="#">Mot de passe oublié</a>
                    </div>
                </form>
            </div>
        </section>

        <footer class="py-10 border-t mt-16 bg-gray-800">
            <div class="max-w-6xl mx-auto px-4 text-center text-sm text-gray-400">
                <p class="mb-2">Mairie de Kolwezi — Province du Lualaba, RDC</p>
                <p>© Mairie de Kolwezi — Tous droits réservés. Prototype institutionnel.</p>
            </div>
        </footer>
    </main>

    <script type="module">
        // Import des fonctions de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Votre configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCVPiY7Mwj-BWp5MpWOrK4_xDG3LSihzvU",
            authDomain: "projet-commune-52366.firebaseapp.com",
            projectId: "projet-commune-52366",
            storageBucket: "projet-commune-52366.firebasestorage.app",
            messagingSenderId: "9615495431",
            appId: "1:9615495431:web:fc9468c8092ddccbf8f5a2"
        };

        // Initialisation de Firebase et Firestore
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const contactsRef = collection(db, "contacts"); // Collection pour les messages de contact

        // Logique du formulaire de contact avec Firebase Firestore
        const form = document.getElementById('contactForm');
        const formMsg = document.getElementById('formMsg');
        const errorMsg = document.getElementById('errorMsg');
        const submitBtn = document.getElementById('submitBtn');

        // Validation simple pour activer le bouton
        const validateForm = () => {
            const inputs = form.querySelectorAll('input[required], textarea[required]');
            let allValid = true;
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    allValid = false;
                }
            });
            submitBtn.disabled = !allValid;
        };
        form.addEventListener('input', validateForm);
        validateForm(); // Initial check

        form?.addEventListener('submit', async (e) => {
            e.preventDefault();
            submitBtn.disabled = true; // Désactiver pour éviter les doubles envois
            formMsg.classList.add('hidden');
            errorMsg.classList.add('hidden');

            const formData = new FormData(form);
            const data = {
                nom: formData.get('nom'),
                email: formData.get('email'),
                message: formData.get('message'),
                date: new Date()
            };

            try {
                // Envoi des données à la collection 'contacts' dans Firestore
                await addDoc(contactsRef, data);
                
                form.reset();
                formMsg.classList.remove('hidden');
                setTimeout(() => formMsg.classList.add('hidden'), 5000);
                validateForm(); // Revalider après reset
            } catch (error) {
                console.error("Erreur lors de l'envoi du message :", error);
                errorMsg.classList.remove('hidden');
                submitBtn.disabled = false; // Réactiver si erreur
            }
        });

        // --- Le reste du JS est inchangé mais mis ici pour l'organisation ---
        // Mobile menu toggle
        const btn = document.getElementById('btnMenu');
        const mobileMenu = document.getElementById('mobileMenu');
        btn?.addEventListener('click', () => {
            const isExpanded = btn.getAttribute('aria-expanded') === 'true' || false;
            btn.setAttribute('aria-expanded', !isExpanded);
            mobileMenu.classList.toggle('hidden');
        });

        // Smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(a => {
            a.addEventListener('click', function(e){
                const href = this.getAttribute('href');
                if(href && href.length > 1){
                    e.preventDefault();
                    const el = document.querySelector(href);
                    if(el) {
                        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        // Fermer le menu mobile après la navigation
                        if (!mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden');
                            btn.setAttribute('aria-expanded', 'false');
                        }
                    }
                }
            });
        });

    </script>
</body>
</html>
